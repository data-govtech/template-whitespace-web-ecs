{
  "Resources": {
    "EcsCluster97242B84": {
      "Type": "AWS::ECS::Cluster",
      "Properties": {
        "ClusterName": "whitespace-web-ecs-template-cluster"
      },
      "Metadata": {
        "aws:cdk:path": "whitespace-web-ecs-template-fargate/EcsCluster/Resource"
      }
    },
    "taskrole5938D619": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "ecs-tasks.amazonaws.com"
              }
            }
          ],
          "Version": "2012-10-17"
        },
        "ManagedPolicyArns": [
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":iam::aws:policy/AmazonDynamoDBFullAccess"
              ]
            ]
          },
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":iam::aws:policy/AmazonSQSFullAccess"
              ]
            ]
          },
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":iam::aws:policy/AmazonSESFullAccess"
              ]
            ]
          },
          {
            "Fn::Join": [
              "",
              [
                "arn:",
                {
                  "Ref": "AWS::Partition"
                },
                ":iam::aws:policy/AmazonS3FullAccess"
              ]
            ]
          }
        ],
        "PermissionsBoundary": "arn:aws:iam::305326993135:policy/GCCIAccountBoundary",
        "RoleName": "whitespace-web-ecs-template-task-role"
      },
      "Metadata": {
        "aws:cdk:path": "whitespace-web-ecs-template-fargate/task-role/Resource"
      }
    },
    "executionroleD9A39BE6": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Statement": [
            {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": {
                "Service": "ecs-tasks.amazonaws.com"
              }
            }
          ],
          "Version": "2012-10-17"
        },
        "PermissionsBoundary": "arn:aws:iam::305326993135:policy/GCCIAccountBoundary",
        "RoleName": "whitespace-web-ecs-template-execution-role"
      },
      "Metadata": {
        "aws:cdk:path": "whitespace-web-ecs-template-fargate/execution-role/Resource"
      }
    },
    "executionroleDefaultPolicy497F11A3": {
      "Type": "AWS::IAM::Policy",
      "Properties": {
        "PolicyDocument": {
          "Statement": [
            {
              "Action": [
                "logs:CreateLogGroup",
                "logs:CreateLogStream",
                "logs:PutLogEvents",
                "ecr:GetAuthorizationToken",
                "ecr:BatchCheckLayerAvailability",
                "ecr:GetDownloadUrlForLayer",
                "ecr:BatchGetImage"
              ],
              "Effect": "Allow",
              "Resource": "*"
            },
            {
              "Action": [
                "ecr:BatchCheckLayerAvailability",
                "ecr:GetDownloadUrlForLayer",
                "ecr:BatchGetImage"
              ],
              "Effect": "Allow",
              "Resource": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":ecr:ap-southeast-1:305326993135:repository/",
                    {
                      "Fn::ImportValue": "whitespace-web-ecs-template-EcrRepositoryName"
                    }
                  ]
                ]
              }
            },
            {
              "Action": "ecr:GetAuthorizationToken",
              "Effect": "Allow",
              "Resource": "*"
            },
            {
              "Action": [
                "logs:CreateLogStream",
                "logs:PutLogEvents"
              ],
              "Effect": "Allow",
              "Resource": {
                "Fn::GetAtt": [
                  "FargateTaskcontainerLogGroupBC85644B",
                  "Arn"
                ]
              }
            }
          ],
          "Version": "2012-10-17"
        },
        "PolicyName": "executionroleDefaultPolicy497F11A3",
        "Roles": [
          {
            "Ref": "executionroleD9A39BE6"
          }
        ]
      },
      "Metadata": {
        "aws:cdk:path": "whitespace-web-ecs-template-fargate/execution-role/DefaultPolicy/Resource"
      }
    },
    "FargateTaskB0B28A1D": {
      "Type": "AWS::ECS::TaskDefinition",
      "Properties": {
        "ContainerDefinitions": [
          {
            "Environment": [
              {
                "Name": "API_HOST",
                "Value": ""
              },
              {
                "Name": "DB_HOST",
                "Value": ""
              }
            ],
            "Essential": true,
            "Image": {
              "Fn::Join": [
                "",
                [
                  "305326993135.dkr.ecr.ap-southeast-1.",
                  {
                    "Ref": "AWS::URLSuffix"
                  },
                  "/",
                  {
                    "Fn::ImportValue": "whitespace-web-ecs-template-EcrRepositoryName"
                  },
                  ":latest"
                ]
              ]
            },
            "LogConfiguration": {
              "LogDriver": "awslogs",
              "Options": {
                "awslogs-group": {
                  "Ref": "FargateTaskcontainerLogGroupBC85644B"
                },
                "awslogs-stream-prefix": "whitespace-web-ecs-template-fargate-logs",
                "awslogs-region": "ap-southeast-1"
              }
            },
            "Memory": 512,
            "Name": "container",
            "PortMappings": [
              {
                "ContainerPort": 80,
                "Protocol": "tcp"
              }
            ]
          }
        ],
        "Cpu": "256",
        "ExecutionRoleArn": {
          "Fn::GetAtt": [
            "executionroleD9A39BE6",
            "Arn"
          ]
        },
        "Family": "whitespace-web-ecs-template-fargate-task",
        "Memory": "1024",
        "NetworkMode": "awsvpc",
        "RequiresCompatibilities": [
          "FARGATE"
        ],
        "TaskRoleArn": {
          "Fn::GetAtt": [
            "taskrole5938D619",
            "Arn"
          ]
        }
      },
      "Metadata": {
        "aws:cdk:path": "whitespace-web-ecs-template-fargate/FargateTask/Resource"
      }
    },
    "FargateTaskcontainerLogGroupBC85644B": {
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Retain",
      "DeletionPolicy": "Retain",
      "Metadata": {
        "aws:cdk:path": "whitespace-web-ecs-template-fargate/FargateTask/container/LogGroup/Resource"
      }
    },
    "CDKMetadata": {
      "Type": "AWS::CDK::Metadata",
      "Properties": {
        "Analytics": "v2:deflate64:H4sIAAAAAAAA/12OwWoDMQxEvyV3R6l7KD2GbGkvhZZtf8A4yqLsxlokuSUY/3vjhCXQ04zejGA8+MdneFhtw6+u437clMiCUL4sxNH1qJwlousO6SPbnM11nNQkR2tsyatr7wWjQummrIbS4sW+BhmC4XfQ8QUPlMiIUyv8J5wsUEK5s+oonKD0PF1HXPWTJ4rndt5cdRgFepxZyVjOu6DoJh4uY955eBPOcysvvtbqEu8Rjrr58U/gPfjVUYnWkpPRCaG/6R9BBcvxHAEAAA=="
      },
      "Metadata": {
        "aws:cdk:path": "whitespace-web-ecs-template-fargate/CDKMetadata/Default"
      }
    }
  },
  "Outputs": {
    "FargateClusterVpcId": {
      "Description": "ID of VPC used by Fargate Cluster",
      "Value": "vpc-0497cd4a6aaa3c095",
      "Export": {
        "Name": "whitespace-web-ecs-template-FargateClusterVpcId"
      }
    },
    "FargateClusterContainerName": {
      "Value": "container",
      "Export": {
        "Name": "whitespace-web-ecs-template-FargateClusterContainerName"
      }
    },
    "FargateTaskDefinitionArn": {
      "Value": {
        "Ref": "FargateTaskB0B28A1D"
      },
      "Export": {
        "Name": "whitespace-web-ecs-template-FargateTaskDefinitionArn"
      }
    },
    "FargateClusterArn": {
      "Description": "ARN of Cluster used in Fargate Service",
      "Value": {
        "Fn::GetAtt": [
          "EcsCluster97242B84",
          "Arn"
        ]
      },
      "Export": {
        "Name": "whitespace-web-ecs-template-FargateClusterArn"
      }
    },
    "FargateClusterName": {
      "Description": "Name of Cluster used in Fargate Service",
      "Value": {
        "Ref": "EcsCluster97242B84"
      },
      "Export": {
        "Name": "whitespace-web-ecs-template-FargateClusterName"
      }
    }
  },
  "Parameters": {
    "BootstrapVersion": {
      "Type": "AWS::SSM::Parameter::Value<String>",
      "Default": "/cdk-bootstrap/hnb659fds/version",
      "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store."
    }
  },
  "Rules": {
    "CheckBootstrapVersion": {
      "Assertions": [
        {
          "Assert": {
            "Fn::Not": [
              {
                "Fn::Contains": [
                  [
                    "1",
                    "2",
                    "3",
                    "4",
                    "5"
                  ],
                  {
                    "Ref": "BootstrapVersion"
                  }
                ]
              }
            ]
          },
          "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
        }
      ]
    }
  }
}